<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>14 MINDS</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
  background: #000; 
  min-height: 100vh; 
  display: flex;
  flex-direction: column;
  justify-content: center; 
  align-items: center;
  font-family: monospace;
  color: #888;
  overflow: hidden;
}

.container {
  position: relative;
  width: 100%;
  max-width: 600px;
  padding: 40px 20px;
  text-align: center;
  z-index: 10;
}

h1 {
  font-size: 11px;
  letter-spacing: 3px;
  color: #444;
  margin-bottom: 60px;
  font-weight: normal;
}

input {
  background: rgba(20, 20, 30, 0.8);
  border: 1px solid rgba(80, 80, 100, 0.3);
  color: #ccc;
  font-family: monospace;
  font-size: 18px;
  padding: 16px 24px;
  width: 300px;
  text-align: center;
  border-radius: 4px;
  outline: none;
  transition: border-color 0.3s;
  margin-bottom: 30px;
}

input:focus {
  border-color: rgba(0, 255, 136, 0.4);
}

button {
  background: rgba(0, 255, 136, 0.8);
  border: none;
  color: #000;
  font-family: monospace;
  font-size: 13px;
  font-weight: bold;
  padding: 16px 40px;
  cursor: pointer;
  border-radius: 4px;
  transition: all 0.2s;
}

button:hover {
  background: rgba(0, 255, 136, 1);
  box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
}

button:disabled {
  background: rgba(60, 60, 80, 0.5);
  cursor: default;
}

.subtext {
  font-size: 9px;
  color: #333;
  margin-top: 20px;
  opacity: 0;
  transition: opacity 0.5s;
}

.container:hover .subtext {
  opacity: 1;
}

.whispers {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
}

.whisper {
  position: absolute;
  font-size: 13px;
  max-width: 300px;
  text-align: center;
  animation: rise 15s linear forwards;
}

@keyframes rise {
  0% { opacity: 0; transform: translateY(0); }
  5% { opacity: 0.6; }
  70% { opacity: 0.4; }
  100% { opacity: 0; transform: translateY(-500px); }
}

.whisper .text {
  display: block;
  margin-bottom: 4px;
}

.whisper .tag {
  font-size: 8px;
  color: #444;
}

.token-info {
  position: fixed;
  bottom: 20px;
  left: 20px;
  font-size: 11px;
  color: #333;
  z-index: 10;
}

.footer {
  position: fixed;
  bottom: 20px;
  right: 20px;
  font-size: 9px;
  color: #222;
  z-index: 10;
}

.footer a { color: #444; text-decoration: none; }
</style>
</head>
<body>

<div class="whispers" id="whispers"></div>

<div class="container">
  <h1>14 MINDS</h1>
  <input type="text" id="input" placeholder="contract address" autofocus>
  <br>
  <button id="ask">ASK</button>
  <div class="subtext">you already know what you're going to do</div>
</div>

<div class="token-info" id="token-info"></div>
<div class="footer"><a href="https://lexispawn.xyz">lexispawn.xyz</a> 路 <a href="https://bankr.bot">bankr</a></div>

<script>
const BANKR_API = 'bk_6XR5WFYULUYTWVXQ6MSXBCZPUEMZ4G2R';

const MODELS = [
  { id: 'claude-opus-4-5', name: 'Opus', hue: 35 },
  { id: 'claude-sonnet-4-5', name: 'Sonnet', hue: 40 },
  { id: 'gemini-2.5-pro', name: 'Gemini', hue: 170 },
  { id: 'gemini-2.5-flash', name: 'Flash', hue: 175 },
  { id: 'gpt-5-mini', name: 'GPT', hue: 270 },
  { id: 'qwen3-coder', name: 'Qwen', hue: 120 },
];

const whispers = document.getElementById('whispers');
const input = document.getElementById('input');
const button = document.getElementById('ask');
const tokenInfo = document.getElementById('token-info');

function addWhisper(text, name, hue) {
  const el = document.createElement('div');
  el.className = 'whisper';
  el.innerHTML = `<span class="text" style="color: hsl(${hue}, 40%, 60%)">${text}</span><span class="tag">${name}</span>`;
  el.style.left = (15 + Math.random() * 70) + '%';
  el.style.bottom = '30%';
  whispers.appendChild(el);
  setTimeout(() => el.remove(), 15000);
}

async function fetchToken(ca) {
  try {
    const res = await fetch(`https://api.dexscreener.com/latest/dex/tokens/${ca}`);
    const data = await res.json();
    if (data.pairs && data.pairs[0]) {
      const p = data.pairs[0];
      return {
        symbol: p.baseToken.symbol,
        price: p.priceUsd,
        change: p.priceChange?.h24 || '?'
      };
    }
  } catch (e) {}
  return { symbol: '???', price: '?', change: '?' };
}

async function queryModel(model, prompt) {
  try {
    const res = await fetch('https://llm.bankr.bot/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${BANKR_API}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        model: model.id,
        messages: [{ role: 'user', content: prompt }],
        max_tokens: 60
      })
    });
    const data = await res.json();
    return data.choices?.[0]?.message?.content || '...';
  } catch (e) {
    return '...';
  }
}

async function ask() {
  const ca = input.value.trim();
  if (!ca) return;
  
  button.disabled = true;
  button.textContent = '路';
  
  const token = await fetchToken(ca);
  tokenInfo.textContent = `$${token.symbol} 路 $${token.price} 路 ${token.change}%`;
  
  const prompt = `$${token.symbol} at $${token.price}, ${token.change}% 24h. One word verdict (BUY/SELL/HOLD) then max 6 words why.`;
  
  // Query one at a time, whisper appears as each responds
  for (const model of MODELS) {
    const response = await queryModel(model, prompt);
    const short = response.split('\n')[0].slice(0, 50);
    addWhisper(short, model.name, model.hue);
    await new Promise(r => setTimeout(r, 300)); // Brief pause between
  }
  
  button.textContent = 'ASK AGAIN';
  button.disabled = false;
}

button.addEventListener('click', ask);
input.addEventListener('keypress', e => { if (e.key === 'Enter') ask(); });
</script>
</body>
</html>
